---
title: NFT Relationship Standard
description: A standard for establishing relationships between NFTs and setting quantifiable attributes for those relationships.
author: Guang Xu (@xg1990)
discussions-to: <URL>
status: Draft
type: Standards Track
category: ERC
created: 2023-05-02
# requires: <EIP number(s)> # Only required when you reference an EIP in the `Specification` section. Otherwise, remove this field.
---

<!--
  READ EIP-1 (https://eips.ethereum.org/EIPS/eip-1) BEFORE USING THIS TEMPLATE!

  This is the suggested template for new EIPs. After you have filled in the requisite fields, please delete these comments.

  Note that an EIP number will be assigned by an editor. When opening a pull request to submit your EIP, please use an abbreviated title in the filename, `eip-draft_title_abbrev.md`.

  The title should be 44 characters or less. It should not repeat the EIP number in title, irrespective of the category.

  TODO: Remove this comment before submitting
-->

## Abstract

This Ethereum Improvement Proposal (EIP) proposes a standard for referring relationships and quantifiable attributes between non-isolated ERC-1155 non-fungible tokens (NFTs). The proposed standard builds upon the existing ERC-1155 standard and extends it to enable users to build a graph of NFTs and quantify the relationships and attributes between them. The intended audience for this EIP is users who need to manage non-isolated NFTs and wish to build relationships between them while quantifying such relationships. Implementing this EIP would allow users to create a graph of NFTs and set quantifiable attributes for each NFT, enabling the creation of more complex NFT ecosystems. Careful design of rules may be required to avoid excessive complexity and gas cost. While a similar EIP, ERC-5521, exists for ERC-721 tokens, it does not provide a way to establish quantifiable relationships or object attributes. This EIP would be a valuable enhancement to the NFT ecosystem, providing users with a powerful tool for managing and quantifying relationships between NFTs.

<!--
  The Abstract is a multi-sentence (short paragraph) technical summary. This should be a very terse and human-readable version of the specification section. Someone should be able to read only the abstract to get the gist of what this specification does.

  TODO: Remove this comment before submitting
-->

## Motivation

<!--
  This section is optional.

  The motivation section should include a description of any nontrivial problems the EIP solves. It should not describe how the EIP solves those problems, unless it is not immediately obvious. It should not describe why the EIP should be made into a standard, unless it is not immediately obvious.

  With a few exceptions, external links are not allowed. If you feel that a particular resource would demonstrate a compelling case for your EIP, then save it as a printer-friendly PDF, put it in the assets folder, and link to that copy.

  TODO: Remove this comment before submitting
-->
The ERC-1155 standard for NFTs currently lacks the ability to establish relationships and attributes between tokens. This limitation makes it difficult for users to build more complex NFT ecosystems that require referring relationships and quantifiable attributes between tokens. For example, a user may create a derivative NFT that refers to the original NFT and sets a quantifiable attribute for the relationship between the two NFTs, but without a standardized way to establish relationships and attributes between NFTs, managing these ecosystems becomes increasingly difficult and inefficient.

Our proposed EIP aims to address this issue by extending the ERC-1155 standard to include the ability to establish referring relationships and quantifiable attributes between NFTs. With this enhancement, users can create a graph of NFTs and set quantifiable attributes for each NFT, providing a powerful tool for managing and quantifying relationships between NFTs.

By enabling users to build more complex NFT ecosystems, our proposed EIP will enhance the NFT ecosystem and open up new possibilities for NFT use cases. However, it's important to consider potential drawbacks such as increased complexity and gas cost, and carefully design rules to mitigate these issues.

Our proposed EIP builds upon the existing Ethereum ecosystem and extends the ERC-1155 standard for NFTs. It also draws inspiration from the ERC-5521 standard for establishing relationships between ERC-721 tokens.

## Specification

<!--
  The Specification section should describe the syntax and semantics of any new feature. The specification should be detailed enough to allow competing, interoperable implementations for any of the current Ethereum platforms (besu, erigon, ethereumjs, go-ethereum, nethermind, or others).

  It is recommended to follow RFC 2119 and RFC 8170. Do not remove the key word definitions if RFC 2119 and RFC 8170 are followed.

  TODO: Remove this comment before submitting
-->

This EIP proposes the addition of two new functions to the ERC-1155 standard: `setRelationship` and `setAttribute`.

### `setRelationship`

The `setRelationship` function establishes a referring relationship between two NFTs. It takes the following parameters:

```solidity
function setRelationship(uint256 _originalID, uint256 _derivativeID, uint256 _attribute) external;
```

- `_originalID`: the ID of the original NFT
- `_derivativeID`: the ID of the derivative NFT that refers to the original NFT
- `_attribute`: the quantifiable attribute for this relationship, which defaults to 1 if not specified

When called, this function establishes a referring relationship between the two NFTs.

### `setAttribute`

The `setAttribute` function sets a quantifiable attribute for an NFT. It takes the following parameters:

```solidity
function setAttribute(uint256 _id, string calldata _name, uint256 _value) external;
```

- `_id`: the ID of the NFT
- `_name`: the name of the attribute to be set
- `_value`: the value of the attribute to be set

When called, this function sets a quantifiable attribute for the NFT.

### Backward Compatibility

This EIP is designed to be fully backward-compatible with existing ERC-1155 contracts and tokens. Existing ERC-1155 contracts and tokens will continue to function as they did before, and the new `setRelationship` and `setAttribute` functions will only be available to contracts that explicitly implement this EIP.

### Security Considerations

Contracts that implement the `setRelationship` function should ensure that the relationship being established is valid and authorized by the appropriate parties. Additionally, contracts that implement the `setAttribute` function should ensure that the attributes being set are not malicious or otherwise harmful to the system.

### Gas Considerations

To mitigate potential issues with excessive complexity and gas cost, the `setRelationship` function only allows for one referring relationship to be established between two NFTs, and the `setAttribute` function only allows for one attribute to be set at a time.

## Rationale

<!--
  The rationale fleshes out the specification by describing what motivated the design and why particular design decisions were made. It should describe alternate designs that were considered and related work, e.g. how the feature is supported in other languages.

  The current placeholder is acceptable for a draft.

  TODO: Remove this comment before submitting
-->

The ERC-1155 standard has been widely adopted for the creation of non-fungible tokens (NFTs) and has proven to be a versatile and flexible standard. However, there is currently no way to establish relationships between NFTs or to set quantifiable attributes for those relationships. This limits the potential use cases for NFTs, as it makes it difficult to track ownership history, establish provenance, and create interactive games and experiences.

The motivation behind proposing this EIP is to provide a way for NFT creators and users to establish relationships between NFTs and set quantifiable attributes for those relationships. This will enable more complex and interesting use cases for NFTs, such as tracking ownership history, establishing provenance, and creating interactive games and experiences.

In developing this EIP, some key design decisions were made. For example, we limited the complexity of the relationship graph that can be created by only allowing for one referring relationship between two NFTs. This helps to ensure that the graph remains manageable and does not become too complex to be useful. Additionally, we kept the gas cost of setting attributes to a minimum by only allowing for one attribute to be set at a time.

While there are currently no similar features in other blockchain languages or standards, we drew inspiration from the concept of Graph Theory, which is a branch of mathematics that studies the relationships between objects. By adding the ability to establish relationships between NFTs and set quantifiable attributes for those relationships, we believe that the ERC-1155 standard will become even more useful and versatile for NFT creators and users.

## Backwards Compatibility

<!--

  This section is optional.

  All EIPs that introduce backwards incompatibilities must include a section describing these incompatibilities and their severity. The EIP must explain how the author proposes to deal with these incompatibilities. EIP submissions without a sufficient backwards compatibility treatise may be rejected outright.

  The current placeholder is acceptable for a draft.

  TODO: Remove this comment before submitting
-->

No backward compatibility issues found.

## Test Cases

<!--
  This section is optional for non-Core EIPs.

  The Test Cases section should include expected input/output pairs, but may include a succinct set of executable tests. It should not include project build files. No new requirements may be be introduced here (meaning an implementation following only the Specification section should pass all tests here.)
  If the test suite is too large to reasonably be included inline, then consider adding it as one or more files in `../assets/eip-####/`. External links will not be allowed

  TODO: Remove this comment before submitting
-->

## Reference Implementation

<!--
  This section is optional.

  The Reference Implementation section should include a minimal implementation that assists in understanding or implementing this specification. It should not include project build files. The reference implementation is not a replacement for the Specification section, and the proposal should still be understandable without it.
  If the reference implementation is too large to reasonably be included inline, then consider adding it as one or more files in `../assets/eip-####/`. External links will not be allowed.

  TODO: Remove this comment before submitting
-->

```solidity
pragma solidity ^0.8.0;

contract NFTGraph {
    
    mapping(uint256 => mapping(uint256 => uint256)) public relationship;
    mapping(uint256 => mapping(bytes32 => bytes32)) public attributes;

    function setRelationship(uint256 originalNFT, uint256 derivativeNFT, uint256 relationshipValue) public {
        require(originalNFT != derivativeNFT, "Original and derivative NFTs must be different");
        relationship[originalNFT][derivativeNFT] = relationshipValue;
    }
    
    function setAttribute(uint256 nft, bytes32 attributeName, bytes32 attributeValue) public {
        attributes[nft][attributeName] = attributeValue;
    }
    
}
```

This example contract defines a NFTGraph contract that has a mapping called relationship that stores the relationships between original NFTs and derivative NFTs. The setRelationship function allows for the setting of the relationship value between two NFTs. The setAttribute function allows for the setting of attributes for NFTs using a mapping called attributes.

Note that this implementation is just an example, and it may not be suitable for production use without further testing and refinement.

## Security Considerations

<!--
  All EIPs must contain a section that discusses the security implications/considerations relevant to the proposed change. Include information that might be important for security discussions, surfaces risks and can be used throughout the life cycle of the proposal. For example, include security-relevant design decisions, concerns, important discussions, implementation-specific guidance and pitfalls, an outline of threats and risks and how they are being addressed. EIP submissions missing the "Security Considerations" section will be rejected. An EIP cannot proceed to status "Final" without a Security Considerations discussion deemed sufficient by the reviewers.

  The current placeholder is acceptable for a draft.

  TODO: Remove this comment before submitting
-->

Needs discussion.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
