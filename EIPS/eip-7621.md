---
eip: 7621
title: Increase calldata pricing
description: Increase calldata price to decrease the maximum block size
author: Toni Wahrstätter (@nerolation), Vitalik Buterin (@vbuterin)
discussions-to: https://ethereum-magicians.org/t/tbd/tbd
type: Standards Track
category: Core
status: Draft
created: 2024-02-13
---



## Abstract

The current calldata pricing allows for significantly large blocks of up to 2.7 MB while the average block size is much smaller at 125 KB. 
This EIP proposes an adjustment in the Ethereum calldata price to handle higher transaction throughput while reducing the current maximum block size. 
This is achieved through adjusting calldata pricing, particularly for nonzero bytes, aligning with emerging data storage practices in the network, especially in the context of EIP-4844.


## Motivation

The block gas limit hasn't been increased since EIP-1559, while the average size of blocks has continuously increased due to the growing number of rollups posting data to Layer 1. 
EIP-4844 introduces blobs as a preferred method for data availability, signaling a shift away from calldata-dependent strategies. 
This transition demands a reevaluation of calldata pricing, especially with regards to mitigating the inefficiency between the average block size in bytes and the maximum one possible.
By increasing the gas cost for nonzero calldata bytes for transactions that are mainly using Ethereum for Data Availability (DA), the proposal aims to balance the need for block space with the necessity of reducing the maximum block size to make room for adding more blobs. The move from using calldata for DA to blobs further strengthens the multidimensional fee market by incentivizing blob space.

Increasing calldata cost to 68 gas for transactions that do not spend more gas on EVM operations than a certain threshold, significantly reduces the maximum possible block size by lowering the number of huge, pure-DA transactions that fit into one block.
However, the calldata price is kept at 16 gas per nonzero byte for those transactions that also spend enough on EVM computation, such that nothing changes for those users. Consequently, this approach safeguards users who depend on extensive calldata usage alongside EVM computations, ensuring they are not adversely affected by the new pricing model.


## Specification

| Parameter | Value |
| - | - |
| `OLD_TOKEN_COST`    |  `4` |
| `NEW_TOKEN_COST`    |  `17` |


Let `tokens_in_calldata = zero_bytes_in_calldata + nonzero_bytes_in_calldata * 4`.


The current formula for determining the gas used per transaction is:

```python
tx.gasused = (
    21000 +
    OLD_TOKEN_COST * tokens_in_calldata +
    evm_gas_used
)
```

The formula for determining the gas used per transaction changes to:

```python
tx.gasused = (
    21000 +
    max(
        NEW_TOKEN_COST * tokens_in_calldata, 
        OLD_TOKEN_COST * tokens_in_calldata + evm_gas_used
    )
)
```

## Rationale

The maximum block size currently stands at ~1.79 MB (`30_000_000/16`), increasing to ~2.54 MB with EIP-4844 going live. 
With the implementation of EIP-4844, calldata may stop being the best candidate for publishing data.
With this proposal, by repricing nonzero calldata bytes to 68 gas, we aim to reduce the maximum possible block size to approximately 0.42 MB or even lower.
This reduction makes room for increasing the block gas limit or the number of blobs, while ensuring network security and efficiency. 
Importantly, regular users (sending ETH/tokens/NFTs, engaging in DeFi, social media, restaking, etc.) who do not use Ethereum exclusively for DA, may remain unaffected.



## Backwards Compatibility

This is a backwards incompatible gas repricing that requires a scheduled network upgrade.

Users will be able to continue operating with no changes.

## Security Considerations

As the maximum possible block size is reduced, no security concerns were raised.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
 
