---
eip: 2253
title: wallet_getAddressBook JSON-RPC Method
author: Loredana Cirstea (@loredanacirstea)
discussions-to: https://ethereum-magicians.org/t/eip-2253-add-wallet-getaddressbook-json-rpc-method/3592
status: Draft
type: Standards Track
category: Interface
created: 2019-08-27
requires: 1474
---

## Simple Summary

This is a proposal for a new JSON-RPC call for retrieving a selection of items from a wallet's address book, with the user's permission.

## Abstract

There is no standardized way for a dApp to request address book information from a user's wallet. This leads to either nonoptimal UX, where the user needs to find and copy-paste an Ethereum address, or to duplication of effort across dApps and decreased privacy.

## Motivation

Address books for wallets are becoming a standard feature, greatly improving usability, while maintaining user ownership on this data.

There is no standardized way for a dApp to leverage this information, with the user's permission. dApps can use the `wallet_getAddressBook` JSON-RPC method to retrieve strictly the information that they need from a wallet, in order to process the request.

The current proposal will avoid duplication of effort - dApps will not need to ask the user to create another address book with them. And it also protects the user's privacy, while increasing usability.

## Specification

New JSON-RPC method: `wallet_getAddressBook`.

**Arguments:**
- options object, optional:
  - `limit` - type `uint256`, the maximum number of address book records expected by the dApp; optional - when missing, the entire address book is requested
  - `fields` - type `string[]`, address book record fields that are requested; optional - when missing, all fields are requested
  - `justification` - type `string`, human-readable text provided by the dApp, explaining the intended purpose of this request; optional but recommended

**Result:**
- array with address book records
  - `address` - type `address`, required
  - `name` - type `string`, optional, may not be returned if user refuses
  - `icon` - type `base64`, token icon; optional

### Examples

**1) A request to return the entire address book, with all fields:**
```
{
  "id":1,
  "jsonrpc": "2.0",
  "method": "wallet_getAddressBook",
  "params": [{
    "justification": "Import your address book contacts if you trust us and if you want to see icons and names when you choose a friend's address. You can select as many contacts as you want."
  }]
}
```
Result:

```
{
  "id":1,
  "jsonrpc": "2.0",
  "result": [
    {
      "address": "0x0000000000000000000000000000000000000001",
      "name": "My Friend",
      "icon": "data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
    },
    {
      "address": "0x0000000000000000000000000000000000000002",
      "name": "Beer Buddy"
    }
  ]
}
```

**2) A request to return one address book item, with all fields:**
```
{
  "id":1,
  "jsonrpc": "2.0",
  "method": "wallet_getAddressBook",
  "params": [
    {
      "limit": 1,
      "justification": "Select a friend's address, so we can send them a free NFT."
    }
  ]
}
```
Result:

```
{
  "id":1,
  "jsonrpc": "2.0",
  "result": [
    {
      "address": "0x0000000000000000000000000000000000000001",
      "name": "My Friend",
      "icon": "data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
    }
  ]
}
```

**3) A request to return three address book items, only containing the address:**
```
{
  "id":1,
  "jsonrpc": "2.0",
  "method": "wallet_getAddressBook",
  "params": [
    {
      "limit": 3,
      "fields": ["address"],
      "justification": "Select three addresses that you want to open a payment channel with"
    }
  ]
}
```
Result:

```
{
  "id":1,
  "jsonrpc": "2.0",
  "result": [
    {
      "address": "0x0000000000000000000000000000000000000001"
    },
    {
      "address": "0x0000000000000000000000000000000000000002"
    },
    {
      "address": "0x0000000000000000000000000000000000000003"
    }
  ]
}
```


### UI Best Practices

The wallet should display a UI to the user, showing the request.
The user can:
- accept the request, in which case the dApp receives all of the requested information
- reject the request
- amend the request by lowering the number of address book items returned to the dApp or by restricting fields

The wallet should display a UI to the user, showing the request. The user can accept or reject the request.

If the entire address book is requested, the total number of address book items will be shown. However, even in this case, the user should be able to make a selection and restrict exposed fields, amending the request.

If an address book selection is requested, the user will select the items from the address book list, already filtered by the request.

The wallet should also show radio options for which `WalletAddressBookItem` optional fields the user wants to expose, if those fields were requested.

## Rationale

Copy-pasting Ethereum addresses in dApps is not a good UX. Wallets should and are beginning to implement address books for users.

If all dApps that want to increase their usability will start to implement their own address books, there will be a lot of duplicated effort and lack of privacy for users. The address book data should be controlled by the user and the user should choose how much of this information is given to a dApp.

It remains to be discussed if the request parameters need to specify `optional` and `required` fields or minimum and maximum number of items to be returned.

## Backwards Compatibility

Not relevant, as this is a new method.


## Test Cases

To be done.


## Implementation

To be done.


## Copyright
Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
