---
eip: 6609
title: A parallel system that runs next to the EVM.
description: A gasless system that runs next to the EVM that uses reputation (rep) instead of gas.
author: JKincorporated (@JKincorporated)
discussions-to: https://ethereum-magicians.org/t/draft-eip-parallel-system-that-runs-next-to-the-evm/13155
status: Draft
type: Standards Track
category: Core
created: 2023-03-03
---

## Abstract

This EIP proposes a gasless system for that runs next to the EVM. This system has no native currency so all currencies should be made using smart contracts. The proposed system aims to prevent gas fees while maintaining a secure system.
  
This is still a work in progress and no where near close enough for production.


## Motivation

The existing Ethereum gas system can be a barrier to entry for some users, especially those who cannot afford to pay the high gas fees. A gasless system based on reputation can enable more users to participate in the Ethereum ecosystem. Additionally, the proposed system aims to prevent multiple accounts and limit execution of transactions to users with a minimum reputation score to reduce the risk of fraudulent activities.

## Specification

### Reputation System

The gasless system proposed in this EIP is based on reputation. Users must have a minimum reputation score to execute transactions. The reputation score can be earned by staking or waiting.

Users can use one of the following meathods to increase their reputation:

* Waiting: If a user has a negative reputation score, they can wait for their reputation score to increase over time. Reputation should increase (if positive) by ((0 - reputation) / 100) every 7200 blocks until neutral. For example, if a user has a reputation score of -10, their reputation score would increase by 0.1 points every 7200 blocks until it reaches 0.
* Staking: If a user is staking on the main network, their reputation will increase by the amount that their address has deposited as staking divided by 32 every 7200 blocks.
Users with too low a negative reputation score cannot execute transactions until they have staked or waited for their reputation score to become neutral or positive. A user's reputation cannot exceed the negate of the lowest reputation (that the network will accept).

### Account Unlocking

To prevent multiple accounts, a minimum amount of tokens* must be locked in in the user's wallet on the main network to unlock it. Users with a negative reputation cannot send funds to a different wallet.

When a user first creates a wallet, they must lock a minimum amount of Ether in their wallet (to access the PBEVM). This amount should be dynamically adjusted based on a user vote or predetermined fixed value. These funds can be withdrawn only if the user has a positive or neutral reputation value. Users with a negative reputation value can not unlock the funds until their reputation becomes neutral or positive.

### PBEVM (Python Based Ethereum Virtual Machine)

Instead of the EVM this uses the PBEVM (Python Based Ethereum Virtal Machine), This is because having 2 EVMs sounds weird.
As the name suggests all smart contracts that are to be run on this VM should be writting in Python.

As python is not a very secure lanuage the only libraries that should be allowed are:

* ZLib (For compressing data to store on-chain)
* Hashlib (For Hashing)
* Math (For Complex Math Problems)

As an additional security measure, the Python code should be screened for any occurrences of known security vulnerabilities and banned libraries / functions.
  
### Reputation Usage Calculation
The reputation usage for each transaction should be calculated like so:

```
x = Memory Used (Bytes)
y = CPU Execution Time (Âµs)
z = On Chain Storage Used (Bytes)
round(1 + (((x) / 5000) * ((y) / 5000)) + (z / 1000), 2)
```

Where x is the amount of memory used in bytes, y is the CPU execution time in microseconds, and z is the amount of on-chain storage used in bytes. This formula calculates the reputation usage based on the resources used by the transaction.

The round function rounds the result to two decimal places to ensure that the reputation usage is precise. This reputation usage calculation aims to incentivize efficient use of resources while preventing abuse of the system.

During the processing of each transaction the reputation should be calculated and subtracted from the users current reputation. If the result is below the minimum amount of reputation allowed. The transaction should be voided. 

### Implimentation

To implement EIP-6609 at the block level, the Ethereum client software needs to be modified to support the gasless system. This involves creating a parallel system that runs next to the EVM and is responsible for executing transactions that are validated by the reputation system.

When a block is received by the Ethereum client, the client will execute the transactions in the block using the existing EVM, as usual. However, in addition to this, the client will also execute a separate set of transactions using the PBEVM (Python Based Ethereum Virtual Machine) to validate the reputation score of the user who initiated each transaction.

To validate the reputation score, the PBEVM will calculate the reputation usage of each transaction based on the resources used by the transaction, as specified in the EIP. If the reputation usage is greater than the user's current reputation score, the transaction will be rejected by the parallel system.

If a transaction is accepted by the PBEVM, the transaction will be added to the block, and the user's reputation score will be updated accordingly. 

The PBEVM should not adjust a users reputation every 7200 blocks but should (on the occurance of a transaction) calculate the difference in blocks from their last transaction and (If the transaction is successful) update it accordingly.

Each block should also have a separate section in the body for PBEVM transactions.
  
## Rationale

The proposed system aims to make Ethereum more accessible to a wider range of users by eliminating the need for gas fees. The reputation-based system is designed to prevent fraudulent activities and ensure that only trusted users can execute transactions.
The use of Python for the smart contract system is motivated by the popularity and ease of use of Python among developers.

## Backwards Compatibility

There are no backward compatibility issues with this proposal.

## Test Cases

TBD

## Reference Implementation

TBD
  
## Security Considerations

* Transaction Execution Limits: The proposed system limits transaction execution to users with a minimum reputation score. Careful consideration should be given to the threshold level of reputation score required and the mechanisms for enforcing this limit to prevent fraudulent activities.
* PBEVM Security: The use of a Python-based Ethereum Virtual Machine introduces potential security risks, including the possibility of code injection and memory leaks. Careful consideration should be given to ensuring the security and stability of the PBEVM. Auditing and testing should be done to ensure that the PBEVM is secure and stable before deploying the system.
* Smart Contract Security: As the smart contract system is written in Python, the use of secure coding practices and auditing is crucial to prevent vulnerabilities such as buffer overflows, race conditions, and logic errors. Additionally, limiting the number and type of allowed libraries can reduce the attack surface.

## Copyright

I dedicate any and all copyright interest in this software to the
public domain. I make this dedication for the benefit of the public at
large and to the detriment of my heirs and successors. I intend this
dedication to be an overt act of relinquishment in perpetuity of all
present and future rights to this software under copyright law.
