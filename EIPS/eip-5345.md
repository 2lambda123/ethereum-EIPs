---
eip: 5345
title: Silent Signing Extension
description: Temporary transaction signing without user interaction
author: Stanley Wu (@fruit37), Mücahit Büyükyılmaz (@anndro), Muhammed Emin Aydın (@muhammedea)
discussions-to: https://ethereum-magicians.org/t/walletconnect-silent-signing-extension/10137
status: Draft
type: Standards Track
category: Interface
created: 2022-07-26
---

## Abstract

Mobile applications supporting lots of transactions might become a source of bad user experience due to uncontrolled switching between the wallet's and application's UI. By this proposal, we would like to introduce the means to sign and send wallet transactions without the need for user participation. This feature can be implemented by providing user consent for a specific time duration. We call the feature Silent Signing.

## Motivation

Some blockchain applications interact with a blockchain much more frequently than others. It is especially true for gaming applications having their own sidechains. Interrupting the gaming process and switching to the wallet to perform a transaction drastically affect the user experience.

## Specification

To remedy the situation, we'd like to introduce new RPC methods for the WalletConnect protocol. Those methods help enable WalletConnect-supported wallets to implement the Silent Signing feature.

### Ethereum RPC And WalletConnect

For a software application to interact with the blockchain (reading blockchain data and/or sending transactions to the network), it must be connected to a node. For this purpose, every Ethereum client implements a JSON-RPC specification enabling to use a uniform set of methods the applications can rely on to communicate with nodes. JSON-RPC is a stateless, lightweight remote procedure call (RPC) protocol. It defines several data structures and the rules around their processing. All the EVM-compatible blockchains (for example, BSC, Celo, and so on) support their own methods along with the standard Ethereum ones.

WalletConnect is a protocol that allows Web3 apps to connect with blockchain wallets. The protocol is built on top of a WebSocket connection between app-bridge and bridge-wallet. The protocol establishes a remote connection between two apps and/or devices. The payloads are symmetrically encrypted via a key shared between the two peers. The app-to-wallet payload exchange goes over through a Bridge server. As the payload is encrypted, the Bridge server redirects packages between the app and wallet by topic ID, without checking package details.

A decrypted package contains standard RPC methods and parameters. A WalletConnect client supports a set of RPC methods, and only these methods are to be used with official clients. Note that these RPC methods differ from the Ethereum RPC methods. They only define wallet actions.

Here is the list of supported WalletConnect client methods:


* `personal_sign`
* `eth_sign`
* `eth_signTypedData`
* `eth_sendTransaction`
* `eth_signTransaction`
* `eth_sendRawTransaction`

Due to its nature, the Bridge server distributes payload packages directly without knowing about the RPC calls being made. That enables us to leave the Bridge server unchanged while making changes to the WalletConnect clients.

### Silent Signing User Flow

The Silent Signing process has the following structure:

1. First, the application requests the wallet to use Silent Signing via the RPC's `wallet_requestSilentSign` method.
2. Second, the wallet prompts the user to confirm enabling the Silent Singing functionality for a specific time duration.
3. If the user does not confirm Silent Signing or the RPC method is not allowed, the application will continue using the regular methods.
4. If the user confirms Silent Signing, then each subsequent transaction will be sent using the `wallet_silentSendTransaction` method for the time duration specified.

### Implementation

The implementation introduces no changes on the WalletConnect Bridge server's side but adds new RPC methods to the client libraries and wallet.

### New RPC Methods

#### `wallet_requestSilentSign`

This RPC method opens the wallet and prompts the user to enable automatic signing for a specific time duration. This function grants the application to call the following methods until the timestamp expires. Standard methods like `eth_signTrancaction` remain untouched.

```shell
Parameters
  until: NUMBER - unix timesptamp data 

Returns
  clientSecret: DATA, 20 Bytes - a secret key for auto-signing requests
```

#### `wallet_silentSignTransaction`

This RPC method creates a transaction and sends its data to the wallet for signing. The wallet signs the data in the background, interfering with no processes the user is involved in. Afterward, the application sends the signed transaction to the blockchain using Nethereum's or other libraries' `sendRawTransaction` method.

```shell
Parameters
  clientSecret: DATA, 20 Bytes - secret key obtained from game_requestAutoSign method
  Object - The transaction object
    from: DATA, 20 Bytes - The address the transaction is sent from.
    to: DATA, 20 Bytes - (optional when creating new contract) The address the transaction is directed to.
    gas: QUANTITY - (optional, default: 90000) Integer of the gas provided for the transaction execution. It will return unused gas.
    gasPrice: QUANTITY - (optional, default: To-Be-Determined) Integer of the gasPrice used for each paid gas, in Wei.
    value: QUANTITY - (optional) Integer of the value sent with this transaction, in Wei.
    data: DATA - The compiled code of a contract OR the hash of the invoked method signature and encoded parameters.
    nonce: QUANTITY - (optional) Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce.
  
Returns
  DATA, The signed transaction object.
```

#### `wallet_silentSendTransaction`

This RPC method creates a transaction and sends it to the blockchain without interfering with the process the user is involved in.

```shell
Parameters
  clientSecret: DATA, 20 Bytes - secret key obtained from game_requestAutoSign method
  Object - The transaction object
    from: DATA, 20 Bytes - The address the transaction is sent from.
    to: DATA, 20 Bytes - (optional when creating new contract) The address the transaction is directed to.
    gas: QUANTITY - (optional, default: 90000) Integer of the gas provided for the transaction execution. It will return unused gas.
    gasPrice: QUANTITY - (optional, default: To-Be-Determined) Integer of the gasPrice used for each paid gas.
    value: QUANTITY - (optional) Integer of the value sent with this transaction.
    data: DATA - The compiled code of a contract OR the hash of the invoked method signature and encoded parameters.
    nonce: QUANTITY - (optional) Integer of a nonce. This allows to overwrite your own pending transactions that use the same nonce.

Returns
  DATA, 32 Bytes - the transaction hash, or the zero hash if the transaction is not yet available.
```

### Application and Wallet Communication

The wallet application closed or active in the background can't connect to the Bridge server via WebSocket. Therefore, we have to trigger the wallet to connect to the Bridge and to start waiting for requests. For this purpose, push notifications are to be used. That means that only the wallets supporting push notifications can implement the feature.

![](../assets/eip-5345/walletconnect-flow.png)

Whenever the wallet receives a push notification, it connects to the Bridge server and gets access to the pending requests. If there are `wallet_silenSignTransaction` or `wallet_silentSendTransaction` silent signing requests pending and the interaction with the requesting client has been confirmed for this particular time duration, then the wallet executes the request without interfering with the ongoing user activity.

## Rationale

Games and Metaverse applications imply lots of cases when the user interacts with the wallet, switching to it and approving transactions. This switching aspect might interfere with gaming per se and create a bad user experience. That is why such applications can benefit if the wallets can support the Silent Signing functionality allowing transactions to be signed with no user interaction.

## Backwards Compatibility

These new RPC methods don't interfere with the current ones, and the push notifications API is currently a part of the `WalletConnect` specification. Implementing the proposal's functionality changes nothing for other applications and wallets.

## Security Considerations

The proposed feature aims to improve the user experience and can only be enabled with user consent. Users take responsibility for enabling Silent Signing for a specified time duration, and they might freely choose to use the application as usual.

## Copyright

Copyright and related rights waived via [CC0](../LICENSE.md).
