---
eip: 5749
title: Deprecate 'window.ethereum'
description: Deprecate 'window.ethereum' and replace with 'window.evmproviders' to improve UX and spur innovation in the wallet space
author: Kosala Hemachandra (@kvhnuke), Brett Kolodny (@brettkolodny)
discussions-to: https://ethereum-magicians.org/t/eip-5749-deprecate-window-ethereum/11195
status: Draft
type: Standards Track
category: Interface
created: 2022-10-04
requires: 1193
---


## Abstract

A Javascript Ethereum Provider interface injection for interoperability between multiple wallets at the same time.

## Motivation

At present, `window.ethereum` is the prevailing method by which Ethereum-compatible applications interact with injected wallets. This originated with Mist Wallet in 2015 to interact with other applications. With the proliferation of both applications and wallets, `window.ethereum` has unintended negative consequences:

- `window.ethereum` only permits one wallet to be injected at a time, resulting in a race condition between two or more wallets. This creates an inconsistent connection behavior that makes having and using more than one browser wallet unpredictable and impractical. The current solution is for wallets to inject their own namespaces, but this is not feasible as every application would need to be made aware of any wallet that might be used.
- The aforementioned race condition means users are disincentivized to experiment with new wallets. This creates a 'winner-takes-most' wallet market across EVM chains which forces application developers to optimize for a particular wallet experience.
- The 'winner-takes-most' wallet environment that results from the `window.ethereum` standard hinders innovation because it creates a barrier to adoption. New entrants into the space have difficulty gaining traction against legacy players because users can have no more than one injected wallet. With new entrants crowded out, legacy wallet providers are put under little pressure to innovate.
- Wallets continue to be the most fundamental tool for interacting with blockchains. A homogeneous wallet experience in Ethereum and EVM chains risks stunting UX improvement across the ecosystem and will allow other ecosystems that are more encouraging of competition and innovation to move ahead. 


Replacing `window.ethereum` with `window.evmproviders` will allow solutions such as web3modal and web3onboard to only display all injected wallets the user has installed. This will simpify the UX and remove race conditions between wallet providers in case multiple wallets are installed. Over time, as `window.evmproviders` supplants the current standard and removes barriers to choice, we can hope to see a wallet landscape more reflective of user preference.



### Some wallets that current;y use `window.ethereum`
	Metamask
	Coinbase wallet
	Enkrypt
	Rabby
	Trust wallet
	Rainbow ..etc

## Specification
The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119.

### `window.evmproviders={}`


```typescript
interface ProviderInfo {
	name: string
	icon:  `data:image/svg+xml;base64,${string}`
	description: string
}
interface ProviderWithInfo extends EIP1193Provider {
	info: ProviderInfo
}
interface EVMProvidersType {
	[key: string]: ProviderWithInfo;
}
interface  Window {
	evmproviders: EVMProvidersType
}
```
Type `EIP1193Provider` is well documented at [EIP-1193](./eip-1193.md)

```
interface ProviderInfo

name: Name of the Wallet
icon: base64 encoded svg image
description: Description for your wallet
```

```
interface EVMProvidersType
key is RECOMMENDED to be the name of the extension
```
By adopting an object for EIP-1193 compliant providers we can have multiple different ethereum/evm compatible wallets coexists in the same browser. This will prevent race conditions and inconsistent behaviors.

By introducing `ProviderInfo` type web onboarding libraries such as 
	Web3Modal
	Web3React
	Web3Onboard
can easily grab the necessary information to populate their popup window to choose the wallet. 



## Rationale
name (`evmproviders`)  was chosen in order to be inclusive of all other chains that are evm and EIP-1193 compliant. 
**svg** was chosen since it is easier to be modified if the application requires for example different size for the image. 

## Backwards Compatibility
This EIP is not intended to replace current behavior for `window.ethereum`. Therefore it SHOULD NOT break existing applications. However, the goal is to adopt this standard over time and deprecate `window.ethereum` and make `window.evmproviders` the RECOMMENDED way of injecting browser wallets. 


## Reference Implementation
### injection
```	
	const provider: ProviderWithInfo = [your wallet]
	window.evmproviders = window.evmproviders || {};
	window.evmproviders[name] = provider
```

### getting list of all evm providers
```
	const allproviders = Object.values(window.evmproviders)
```

## Security Considerations

Review all security considerations at EIP-1193 as all of them apply here as well. 

By using svg images, it can potentially open up the application for xss via hidden js code inside the svg. applications and libraries must make sure they render the svg inside the `<img>` tag to make sure no JS excutions can happen. 

## Copyright
Copyright and related rights waived via [CC0](../LICENSE.md).
